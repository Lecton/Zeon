/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package com.communication;

import io.netty.handler.ssl.SslContext;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import javax.net.ssl.SSLException;

import com.mobile.Client;

import android.util.Log;

/**
 *
 * @author Bernhard
 */
public final class TrustStore {
    private static final byte[] chain =new byte[] {
        45, 45, 45, 45, 45, 66, 69, 71, 73, 78, 32, 
        67, 69, 82, 84, 73, 70, 73, 67, 65, 84, 69, 
        45, 45, 45, 45, 45, 13, 10, 77, 73, 73, 68, 
        104, 122, 67, 67, 65, 109, 43, 103, 65, 119, 73, 
        66, 65, 103, 73, 69, 82, 78, 78, 122, 106, 84, 
        65, 78, 66, 103, 107, 113, 104, 107, 105, 71, 57, 
        119, 48, 66, 65, 81, 115, 70, 65, 68, 66, 48, 
        77, 81, 115, 119, 67, 81, 89, 68, 86, 81, 81, 
        71, 69, 119, 74, 97, 81, 84, 69, 81, 77, 65, 
        52, 71, 65, 49, 85, 69, 13, 10, 67, 66, 77, 
        72, 82, 50, 70, 49, 100, 71, 86, 117, 90, 122, 
        69, 82, 77, 65, 56, 71, 65, 49, 85, 69, 66, 
        120, 77, 73, 85, 72, 74, 108, 100, 71, 57, 121, 
        97, 87, 69, 120, 69, 106, 65, 81, 66, 103, 78, 
        86, 66, 65, 111, 84, 67, 86, 78, 48, 99, 109, 
        86, 104, 98, 84, 74, 78, 90, 84, 69, 89, 77, 
        66, 89, 71, 65, 49, 85, 69, 13, 10, 67, 120, 
        77, 80, 85, 51, 82, 121, 90, 87, 70, 116, 77, 
        107, 49, 108, 76, 109, 78, 118, 76, 110, 112, 104, 
        77, 82, 73, 119, 69, 65, 89, 68, 86, 81, 81, 
        68, 69, 119, 108, 84, 100, 72, 74, 108, 89, 87, 
        48, 121, 84, 87, 85, 119, 72, 104, 99, 78, 77, 
        84, 81, 119, 79, 84, 69, 51, 77, 84, 81, 119, 
        77, 84, 77, 51, 87, 104, 99, 78, 13, 10, 77, 
        84, 85, 119, 79, 84, 69, 121, 77, 84, 81, 119, 
        77, 84, 77, 51, 87, 106, 66, 48, 77, 81, 115, 
        119, 67, 81, 89, 68, 86, 81, 81, 71, 69, 119, 
        74, 97, 81, 84, 69, 81, 77, 65, 52, 71, 65, 
        49, 85, 69, 67, 66, 77, 72, 82, 50, 70, 49, 
        100, 71, 86, 117, 90, 122, 69, 82, 77, 65, 56, 
        71, 65, 49, 85, 69, 66, 120, 77, 73, 13, 10, 
        85, 72, 74, 108, 100, 71, 57, 121, 97, 87, 69, 
        120, 69, 106, 65, 81, 66, 103, 78, 86, 66, 65, 
        111, 84, 67, 86, 78, 48, 99, 109, 86, 104, 98, 
        84, 74, 78, 90, 84, 69, 89, 77, 66, 89, 71, 
        65, 49, 85, 69, 67, 120, 77, 80, 85, 51, 82, 
        121, 90, 87, 70, 116, 77, 107, 49, 108, 76, 109, 
        78, 118, 76, 110, 112, 104, 77, 82, 73, 119, 13, 
        10, 69, 65, 89, 68, 86, 81, 81, 68, 69, 119, 
        108, 84, 100, 72, 74, 108, 89, 87, 48, 121, 84, 
        87, 85, 119, 103, 103, 69, 105, 77, 65, 48, 71, 
        67, 83, 113, 71, 83, 73, 98, 51, 68, 81, 69, 
        66, 65, 81, 85, 65, 65, 52, 73, 66, 68, 119, 
        65, 119, 103, 103, 69, 75, 65, 111, 73, 66, 65, 
        81, 67, 122, 73, 114, 106, 66, 48, 110, 73, 66, 
        13, 10, 108, 97, 71, 48, 98, 100, 76, 89, 70, 
        73, 69, 111, 101, 57, 68, 115, 101, 52, 66, 100, 
        81, 119, 110, 102, 88, 109, 108, 107, 79, 102, 115, 
        54, 108, 54, 65, 106, 101, 85, 74, 89, 55, 104, 
        108, 78, 65, 121, 90, 51, 116, 106, 79, 54, 67, 
        85, 112, 119, 90, 115, 76, 48, 120, 83, 114, 110, 
        101, 87, 69, 71, 121, 108, 119, 71, 116, 53, 54, 
        68, 13, 10, 80, 87, 57, 50, 113, 118, 81, 105, 
        48, 65, 99, 71, 49, 108, 85, 47, 112, 113, 85, 
        102, 66, 77, 114, 116, 108, 65, 78, 50, 78, 117, 
        118, 75, 111, 77, 53, 99, 90, 49, 56, 49, 85, 
        112, 118, 56, 118, 121, 56, 111, 70, 100, 85, 54, 
        75, 51, 105, 57, 97, 87, 104, 101, 87, 68, 82, 
        98, 114, 85, 90, 78, 84, 111, 112, 107, 51, 78, 
        74, 108, 13, 10, 53, 112, 84, 74, 74, 50, 75, 
        110, 90, 108, 70, 43, 53, 118, 106, 100, 86, 70, 
        55, 76, 103, 71, 90, 74, 78, 100, 108, 47, 67, 
        65, 102, 105, 47, 81, 72, 98, 84, 53, 104, 117, 
        117, 97, 78, 53, 73, 48, 113, 54, 65, 100, 65, 
        111, 115, 104, 121, 74, 118, 78, 113, 115, 70, 122, 
        99, 82, 47, 101, 111, 75, 88, 47, 72, 80, 98, 
        113, 90, 85, 13, 10, 49, 102, 108, 52, 66, 113, 
        82, 53, 70, 55, 43, 83, 79, 52, 102, 89, 102, 
        99, 98, 48, 84, 108, 70, 66, 54, 68, 49, 112, 
        52, 119, 122, 51, 113, 104, 104, 68, 48, 88, 97, 
        120, 99, 43, 112, 120, 49, 105, 55, 55, 100, 84, 
        69, 81, 113, 65, 53, 86, 105, 76, 53, 55, 65, 
        55, 117, 115, 112, 111, 67, 89, 106, 104, 100, 85, 
        68, 121, 121, 55, 13, 10, 76, 69, 117, 113, 86, 
        72, 52, 83, 118, 78, 78, 108, 80, 71, 110, 65, 
        57, 69, 76, 83, 73, 122, 65, 88, 83, 107, 81, 
        98, 65, 103, 77, 66, 65, 65, 71, 106, 73, 84, 
        65, 102, 77, 66, 48, 71, 65, 49, 85, 100, 68, 
        103, 81, 87, 66, 66, 83, 77, 114, 51, 90, 82, 
        108, 111, 72, 79, 90, 108, 110, 87, 104, 79, 116, 
        110, 90, 53, 122, 78, 13, 10, 70, 56, 108, 53, 
        85, 106, 65, 78, 66, 103, 107, 113, 104, 107, 105, 
        71, 57, 119, 48, 66, 65, 81, 115, 70, 65, 65, 
        79, 67, 65, 81, 69, 65, 108, 99, 47, 111, 73, 
        122, 51, 70, 86, 77, 67, 110, 121, 105, 71, 50, 
        79, 56, 88, 79, 105, 100, 112, 81, 78, 56, 90, 
        43, 72, 99, 100, 51, 53, 67, 55, 122, 117, 69, 
        77, 120, 49, 76, 53, 88, 13, 10, 118, 119, 71, 
        86, 75, 90, 78, 85, 51, 84, 56, 43, 47, 110, 
        55, 108, 120, 101, 78, 117, 85, 89, 53, 68, 121, 
        117, 78, 49, 71, 103, 77, 74, 87, 88, 108, 114, 
        75, 55, 116, 73, 97, 77, 106, 74, 84, 53, 97, 
        75, 43, 73, 48, 68, 74, 102, 73, 82, 85, 99, 
        97, 54, 115, 100, 97, 111, 100, 74, 52, 113, 115, 
        73, 81, 87, 98, 100, 43, 66, 13, 10, 97, 74, 
        109, 81, 105, 117, 117, 68, 69, 122, 49, 90, 73, 
        55, 110, 102, 110, 70, 98, 108, 65, 101, 77, 122, 
        75, 103, 104, 51, 68, 107, 80, 49, 75, 108, 102, 
        107, 86, 113, 51, 75, 100, 43, 86, 69, 66, 51, 
        117, 85, 121, 81, 53, 71, 108, 108, 49, 116, 86, 
        50, 101, 77, 71, 57, 51, 122, 67, 104, 80, 110, 
        80, 110, 86, 43, 50, 121, 121, 51, 13, 10, 90, 
        78, 57, 71, 66, 84, 73, 114, 69, 112, 83, 43, 
        104, 43, 84, 99, 115, 76, 87, 83, 48, 76, 75, 
        109, 43, 118, 76, 82, 107, 90, 115, 111, 98, 43, 
        71, 122, 100, 85, 57, 75, 116, 72, 102, 69, 106, 
        69, 122, 105, 98, 113, 43, 78, 89, 48, 55, 79, 
        118, 100, 67, 112, 70, 87, 55, 49, 68, 121, 68, 
        87, 119, 75, 110, 87, 116, 110, 55, 105, 13, 10, 
        67, 85, 65, 66, 102, 50, 90, 112, 89, 68, 70, 
        89, 90, 98, 88, 106, 79, 51, 84, 65, 120, 49, 
        112, 122, 53, 116, 104, 114, 67, 71, 88, 114, 74, 
        70, 104, 47, 88, 75, 74, 115, 97, 57, 103, 112, 
        56, 112, 100, 114, 67, 116, 72, 122, 110, 66, 69, 
        112, 100, 69, 79, 122, 55, 121, 119, 99, 105, 66, 
        116, 72, 78, 119, 61, 61, 13, 10, 45, 45, 45, 
        45, 45, 69, 78, 68, 32, 67, 69, 82, 84, 73, 
        70, 73, 67, 65, 84, 69, 45, 45, 45, 45, 45, 
        13, 10
    };
    
    static SslContext getClientContext() {
        try {
        	File outputDir = Client.clientContext.getCacheDir(); // context being the Activity pointer
        	File f = File.createTempFile("stream2me_temp", ".pem", outputDir);
            FileOutputStream fos =new FileOutputStream(f);
            fos.write(chain);
            fos.close();
            try {
                return SslContext.newClientContext(f);
            } catch (SSLException e) {
            	e.printStackTrace();
            	//Log.e("TrustStore", "SSLException: "+e.getMessage());
            }
        } catch (IOException ex) {
        	Log.e("TrustStore", "IOException: "+ex.getMessage());
        }
        return null;
    }
}